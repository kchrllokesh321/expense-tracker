server {
    listen       80;
    server_name  _;

    root /usr/share/nginx/html;
    index index.html index.htm;

    # Serve static assets with long cache lifetime
    location ~* \.(?:css|js|jpg|jpeg|gif|png|svg|ico|webp|ttf|woff|woff2|eot)$ {
        try_files $uri =404;
        access_log off;
        add_header Cache-Control "public, max-age=31536000, immutable";
    }

    # HTML files (index) should not be cached aggressively
    location / {
        # SPA fallback: serve index.html for unmatched routes
        try_files $uri $uri/ /index.html;
    }

    # Optional: gzip compression
    gzip on;
    gzip_types text/plain application/javascript application/x-javascript text/javascript text/css application/json;
    gzip_min_length 512;
}
